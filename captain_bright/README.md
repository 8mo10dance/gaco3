# 弾幕管理システム

## どんなシステムか？

- VTuber の配信でコメントに打ち込む弾幕（絵文字）を管理するためのシステム

## どのような作りか？

- Rails を使用している
- サーバーはAPI モードで動き、それをMCPサーバー経由でAIから呼び出す

## 設計

登場人物は以下

- 絵文字
- タグ

絵文字とタグは多対多の関係にある

機能としては、以下になる

- 絵文字CRUD
- タグCRUD
- 絵文字とタグの紐づけ

## Q&A

### MCPサーバーについて

弾幕管理システム自体はUIを持たない。Gemini CLI を使って、AIから操作する。
弾幕管理システムは REST API を公開しているので、それを MCP サーバーから呼び出すようにする。

### API の仕様について

REST API を使う。
URL については特に指定はないが、Rails の作法に則る。
JSON の構造も決まっていないが、こちらも Rails の作法に則る。

### データモデルについて

「絵文字」は絵文字そのものだけを持ち、「タグ」はテキストのみを持つ。

## 実行計画

1.  **Railsプロジェクトの作成**
    - `rails new . --api` を実行
2.  **モデルの作成**
    - `Emoji` モデル (`body:string`)
    - `Tag` モデル (`name:string`)
    - `EmojiTag` モデル (中間テーブル)
3.  **コントローラーの作成**
    - `Api::V1::EmojisController`
    - `Api::V1::TagsController`
4.  **ルーティングの設定**
    - `config/routes.rb` に `emojis` と `tags` のリソースを定義
5.  **データベースのセットアップ**
    - `rails db:create`
    - `rails db:migrate`
6.  **コントローラーへのCRUD実装**
    - 各コントローラーに基本的なCRUDアクションを実装